<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Driver's License</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <style>

      body
      {
        margin: 0;
        padding: 0;

        font-family: Roboto;
        background-color: #FAFAFA;
      }

      .container
      {
        display: grid;
        grid-template-columns: 1fr 1.2fr 1fr;
        grid-template-areas:
          ". content .";

        margin-top: 25px;
      }

      .content
      {
        grid-area: content;
      }

      input
      {
        box-sizing:border-box;
      }

      .dl-container
      {
        display: grid;
        grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;
        grid-template-areas:
          "dl-input"
          "dl-personal"
          "dl-data"
          "dl-stats"
          "dl-detail"
          "buttons";
      }

      .dl-input
      {
        display: grid;
        grid-template-columns: 10px 1fr 10px;
        grid-template-areas:
          ". string .";

        grid-area: dl-input;
        height: 49px;
        border-bottom: 1px #E0E0E0 solid;
        text-align:center;
      }

      .string
      {
        grid-area: string;
      }

      .dl-personal
      {
        display: grid;
        grid-template-columns: 10px 1fr 1fr 1fr 0.5fr 10px;
        grid-template-areas:
          ". fname mname lname bdate .";
        grid-column-gap: 6px;

        grid-area: dl-personal;
        text-align: center;
        height: 40px;
      }

      .fname
      {
        grid-area: fname;
        text-align: center;
      }

      .mname
      {
        grid-area: mname;
        text-align: center;
      }

      .lname
      {
        grid-area: lname;
        text-align: center;
      }

      .bdate
      {
        grid-area: bdate;
        text-align: center;
      }

      .dl-data
      {
        display: grid;
        grid-template-columns: 10px 1.3fr 1fr .3fr 10px;
        grid-template-areas:
          ". address city state .";
        grid-column-gap: 6px;


        grid-area: dl-data;
        text-align: center;
        height: 40px;
      }

      .address
      {
        grid-area: address;
      }

      .city
      {
        grid-area: city;
      }

      .state
      {
        grid-area: state;
      }

      .dl-stats
      {
        display: grid;
        grid-template-columns: 10px .8fr 1fr .44fr 10px;
        grid-template-areas:
          ". jurisdiction dlid exp .";
        grid-column-gap: 6px;

        grid-area: dl-stats;
        text-align: center;
        height: 40px;
      }

      .jurisdiction
      {
        grid-area: jurisdiction;
      }

      .dlid
      {
        grid-area: dlid;
      }

      .exp
      {
        grid-area: exp;
      }

      .dl-detail
      {
        display: grid;
        grid-template-columns: 10px .5fr .3fr .3fr .4fr .4fr 10px;
        grid-template-areas:
          ". gender height weight haircolor eyecolor .";
        grid-column-gap: 6px;

        grid-area: dl-data;
        text-align: center;
        border-bottom: 1px #E0E0E0 solid;
        height: 40px;
      }

      .gender
      {
        grid-area: gender;
      }

      .height
      {
        grid-area: height;
      }

      .weight
      {
        grid-area: weight;
      }

      .haircolor
      {
        grid-area: haircolor;
      }

      .eyecolor
      {
        grid-area: eyecolor;
      }

      .buttons
      {
        grid-area: buttons;
        height: 50px;
        text-align: right;
      }

      .card
      {
        background-color: #FFF;
        border-radius: 2px;
        box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
      }

    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>

    $(document).ready(function() {
      $('#submitBtn').click(function() {
        //gets the value of the input field
        var dlInfo = $("#inputString").val();

        var trackOne = dlInfo.substring(dlInfo.indexOf("%"), dlInfo.indexOf("?;"));
        console.log("Track One: " + trackOne);

        var trackTwo = dlInfo.substring(dlInfo.indexOf("?;"), dlInfo.indexOf("?#"));
        console.log("Track Two: " + trackTwo);

        var trackThree = dlInfo.substring(dlInfo.indexOf("?#"), dlInfo.length);
        trackThree = trackThree.replace(/\s/g,'');
        console.log("Track Three: " + trackThree);

        //removes all white space - might be needed later
        //dlInfo = dlInfo.replace(/\s/g,'');


        //Track One
        //variables needed for proper output
        //name variables
        var name;
        var lname;
        var fname;
        var mname;

        //location variables
        var address;
        var city;
        var state;

        //variable used to output data
        var output;

        //assigns state initials
        state = trackOne.substring(1,3);

        //depending on if the city is 13 characters or less, a ^ is placed to seperate between city and information
        //if the city is exactly 13 characters or more then a ^ won't be placed
        if((dlInfo.substring(dlInfo.indexOf('%'),dlInfo.indexOf('$'))).includes('^'))
        {
          //simple output just to clarify for testing purposes
          console.log("City is less than 13 characters");
          //seperates and formats city
          city = dlInfo.substring(3, dlInfo.indexOf('^'));

          //grabs name information between start (^) and end ($^) of name info
          name = dlInfo.substring(dlInfo.indexOf('^') + 1, dlInfo.indexOf('$^'));
          nameArray = name.split('$');

          //assigns and formats name info
          lname = nameArray[0];
          fname = nameArray[1];
          mname = nameArray[2];
        }
        else
        {
          console.log("City is 13 characters");
          city = dlInfo.substring(3, 16);

          name = dlInfo.substring(dlInfo.indexOf('$'), dlInfo.indexOf('$^'));
          nameArray = name.split('$');

          lname = dlInfo.substring(16, dlInfo.indexOf('$'));
          fname = nameArray[1];
          mname = nameArray[2];
        }

        address = dlInfo.substring(dlInfo.indexOf('$^') + 2, dlInfo.indexOf('^?'));

        //Track Two
        jurisdictionID = trackTwo.substring(2,8);

        dlID = trackTwo.substring(8, trackTwo.indexOf("="));

        dateInfo = trackTwo.substring(trackTwo.indexOf("="), trackTwo.length);
        console.log(dateInfo);

        expiration = dateInfo.substring(3,5) + "/" + dateInfo.substring(1,3);
        birthdate = dateInfo.substring(9,11) + "/" + dateInfo.substring(11,13) + "/" + dateInfo.substring(5,9);

        //Track Three


        //output
        output =  fname + "\n" + mname + "\n" + lname + "\n" + address + "\n" + city + "\n" + state + "\n" + jurisdictionID + "\n" + dlID  + "\n" + expiration + "\n" + birthdate;

        $('#fname').val(fname);
        $('#mname').val(mname);
        $('#lname').val(lname);
        $('#address').val(address);
        $('#city').val(city);
        $('#state').val(state);
        $('#jurisdiction').val(jurisdictionID);
        $('#dlid').val(dlID);
        $('#exp').val(expiration);
        $('#bdate').val(birthdate);

        $("#inputString").focus();
        $("#inputString").val("");
      });
    });

    </script>

  </head>
  <body>

    <div class="container">
      <div class="content">
        <div class="card">

          <div class="dl-input">
            <div class="string">
              <input id="inputString" style="width:98%; border-radius:2px; margin-top:15px; border:1px solid #D4D4D4;">
            </div>
          </div>

          <div class="dl-personal">
            <div class="fname">
              <input id="fname" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="First Name">
            </div>
            <div class="mname">
              <input id="mname" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Middle Name">
            </div>
            <div class="lname">
              <input id="lname" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Last Name">
            </div>
            <div class="bdate">
              <input id="bdate" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Birth Date">
            </div>
          </div>

          <div class="dl-data">
            <div class="address">
              <input id="address" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Address">
            </div>
            <div class="city">
              <input id="city" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="City">
            </div>
            <div class="state">
              <input id="state" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="State">
            </div>
          </div>

          <div class="dl-stats">
            <div class="jurisdiction">
              <input id="jurisdiction" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Jurisdiction #">
            </div>
            <div class="dlid">
              <input id="dlid" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Driver's License ID">
            </div>
            <div class="exp">
              <input id="exp" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Expiration Date">
            </div>
          </div>

          <div class="dl-detail">
            <div class="gender">
              <input id="gender" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Gender">
            </div>
            <div class="height">
              <input id="height" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Height">
            </div>
            <div class="weight">
              <input id="weight" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Weight">
            </div>
            <div class="haircolor">
              <input id="haircolor" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Hair Color">
            </div>
            <div class="eyecolor">
              <input id="eyecolor" style="width:100%; border-radius:2px; margin-top:10px; border:1px solid #D4D4D4;" placeholder="Eye Color">
            </div>
          </div>

          <div class="buttons">
            <button id="submitBtn" style="height:25px; border:0; color:#000000; background-color:#42a5f5; border-radius:2px; margin:12px 10px;">Execute</button>
          </div>

        </div>
      </div>
    </div>



  </body>
</html>
